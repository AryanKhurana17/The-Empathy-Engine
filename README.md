# Empathy Engine

A Python-based emotion-aware text-to-speech (TTS) system using Google Cloud Text-to-Speech. Automatically analyzes English text for emotion and dynamically adjusts speech prosody for natural, expressive voice output.

## Table of Contents
- [Project Overview](#project-overview)
- [Features](#features)
- [Installation](#installation)
- [Google Cloud Setup](#google-cloud-setup)
- [Usage](#usage)
  - [Notebook Example](#notebook-example)
  - [Batch Synthesis](#batch-synthesis)
- [How It Works](#how-it-works)
  - [Emotion-to-Voice Mapping](#emotion-to-voice-mapping)
- [Contributing](#contributing)
- [License](#license)

---

## Project Overview

Empathy Engine detects the emotional tone of text using a transformer classifier, then maps detected emotion and intensity into speech prosody (rate, pitch, volume), resulting in lifelike, engaging spoken output via Google Cloud.

---

## Features

- Transformer-based emotion detection
- Expressive speech via Google Cloud neural voices
- Prosody modulation (speed, pitch, loudness) by emotion & intensity
- Batch processing and interactive tests
- Modular, extensible architecture

---

## Installation
pip install --upgrade google-cloud-texttospeech transformers torch numpy pandas tqdm

---

## Google Cloud Setup

1. Create a GCP project ([Google Console](https://console.cloud.google.com/))
2. Enable billing and activate the [Cloud Text-to-Speech API](https://console.cloud.google.com/apis/api/texttospeech.googleapis.com)
3. Create a service account (role: Editor), download your credentials JSON (`your-service-key.json`)
4. In your code, set environment variable:

import os
os.environ['GOOGLE_APPLICATION_CREDENTIALS'] = 'your-service-key.json'

---

## How It Works

1. **Detect emotion:** Transformer classifier outputs top emotion and confidence
2. **Voice mapping:** Parameters set for speed, pitch, volume by emotion & intensity
3. **Synthesizer:** Voice generated by Google Cloud TTS
4. **Output:** Audio files saved in outputs/

### Emotion-to-Voice Mapping

| Emotion   | Speed    | Pitch Shift | Volume | Description           |
|-----------|----------|-------------|--------|----------------------|
| Joy       | 1.12     | +2          | +2     | Bright, energetic    |
| Anger     | 1.13     | +1          | +4     | Forceful, assertive  |
| Sadness   | 0.87     | -2          | -2     | Slow, subdued        |
| Fear      | 1.17     | +3          | +1     | Tense, anxious       |
| Surprise  | 1.15     | +3          | +2     | Elevated, expressive |
| Disgust   | 0.92     | -1          | -1     | Flat, muted          |
| Neutral   | 1.00     | 0           | 0      | Balanced             |

Intensity scaling: Higher confidence = more pronounced change from neutral.

---

## Contributing

- Fork and PR for enhancements, bugfixes, or new emotion logic.
- For issues or questions, open a discussion or contact maintainers.

---

## License

MIT License â€” see LICENSE for details.

